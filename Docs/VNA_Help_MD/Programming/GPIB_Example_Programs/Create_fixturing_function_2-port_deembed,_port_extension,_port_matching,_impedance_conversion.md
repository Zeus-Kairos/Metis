# Create fixturing function (2-port deembed, port extension, port matching,
impedance conversion)

* * *

This example programs below create 2-port deembed, port extension, port
matching and port impedance conversion function.

The first program uses [Fsimulator Draft](../GP-
IB_Command_Finder/Calculate/FSimulatorDraft.htm) and [Fsimulator
Active](../GP-IB_Command_Finder/Calculate/FSimulatorActive.htm) SCPI commands
while the second program uses legacy SCPI commands. Learn about [Using Fixture
Simulator](../Using_Fixture_Simulator.htm).

[See Other SCPI Example Programs](SCPI_Example_Programs.md)

Example program with [Fsimulator Draft](../GP-
IB_Command_Finder/Calculate/FSimulatorDraft.htm) and [Fsimulator
Active](../GP-IB_Command_Finder/Calculate/FSimulatorActive.htm) SCPI commands

*CLS *OPC? SYST:PRES calc1:fsim:send:oord? #calc1:fsim:send:oord 1,0,2,3 #Need to create blocks in this order: #2-port deembed, port extension, port matching, arb z calc:fsim:draft:circ:reset calc:fsim:draft:circ:next? calc:fsim:draft:circ1:add FILE,2 calc:fsim:draft:circ1:vna:ports 1 calc:fsim:draft:circ1:file "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_plus_5.00.s2p" calc:fsim:draft:circ1:state 1  calc:fsim:draft:circ:next? calc:fsim:draft:circ2:add FILE,2 calc:fsim:draft:circ2:vna:ports 2 calc:fsim:draft:circ2:file "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_minus_3.00.s2p" calc:fsim:draft:circ2:state 1  calc:fsim:draft:circ:next? calc:fsim:draft:circ3:add FILE,2 calc:fsim:draft:circ3:vna:ports 3 calc:fsim:draft:circ3:file "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_plus_4.00.s2p" calc:fsim:draft:circ3:state 1  calc:fsim:draft:circ:next? calc:fsim:draft:circ4:add FILE,2 calc:fsim:draft:circ4:vna:ports 4 calc:fsim:draft:circ4:file "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_minus_2.00.s2p" calc:fsim:draft:circ4:state 1 CALC:FSIM:DRAFt:EXTension:PORT1:DELay 5E-11 CALC:FSIM:DRAFt:EXTension:PORT1:DELay? CALC:FSIM:DRAFt:EXTension:PORT1:STATe on CALC:FSIM:DRAFt:EXTension:PORT1:STATe? CALC:FSIM:DRAFt:EXTension:PORT1:END CALC:FSIM:DRAFt:EXTension:PORT2:DELay 5E-11 CALC:FSIM:DRAFt:EXTension:PORT2:DELay? CALC:FSIM:DRAFt:EXTension:PORT2:STATe on CALC:FSIM:DRAFt:EXTension:PORT2:STATe? CALC:FSIM:DRAFt:EXTension:PORT2:END CALC:FSIM:DRAFt:EXTension:PORT3:DELay 1E-10 CALC:FSIM:DRAFt:EXTension:PORT3:DELay? CALC:FSIM:DRAFt:EXTension:PORT3:STATe on CALC:FSIM:DRAFt:EXTension:PORT3:STATe? CALC:FSIM:DRAFt:EXTension:PORT3:END CALC:FSIM:DRAFt:EXTension:PORT4:DELay 1E-10 CALC:FSIM:DRAFt:EXTension:PORT4:DELay? CALC:FSIM:DRAFt:EXTension:PORT4:STATe on CALC:FSIM:DRAFt:EXTension:PORT4:STATe? CALC:FSIM:DRAFt:EXTension:PORT4:END calc:fsim:draft:circ:next? calc:fsim:draft:circ5:add plpc,2 calc:fsim:draft:circ5:vna:ports 1 CALC:FSIM:DRAFt:CIRCuit5:EMBED:TYPE embed calc1:fsim:draft:circ5:stat on calc1:fsim:draft:circ5:stat? calc1:fsim:draft:circ5:par:L 2.2E-08 calc1:fsim:draft:circ5:par:L? calc1:fsim:draft:circ5:par:R 5.2 calc1:fsim:draft:circ5:par:R? calc1:fsim:draft:circ5:par:C 0 calc1:fsim:draft:circ5:par:C? calc1:fsim:draft:circ5:par:G 0 calc1:fsim:draft:circ5:par:G? calc:fsim:draft:circ:next? calc:fsim:draft:circ6:add plpc,2 calc:fsim:draft:circ6:vna:ports 2 CALC:FSIM:DRAFt:CIRCuit6:EMBED:TYPE embed calc1:fsim:draft:circ6:stat on calc1:fsim:draft:circ6:stat? calc1:fsim:draft:circ6:par:L 2.2E-08 calc1:fsim:draft:circ6:par:L? calc1:fsim:draft:circ6:par:R 5.2 calc1:fsim:draft:circ6:par:R? calc1:fsim:draft:circ6:par:C 0 calc1:fsim:draft:circ6:par:C? calc1:fsim:draft:circ6:par:G 0 calc1:fsim:draft:circ6:par:G? calc:fsim:draft:circ:next? calc:fsim:draft:circ7:add plpc,2 calc:fsim:draft:circ7:vna:ports 3 CALC:FSIM:DRAFt:CIRCuit7:EMBED:TYPE embed calc1:fsim:draft:circ7:stat on calc1:fsim:draft:circ7:stat? calc1:fsim:draft:circ7:par:L 3.4E-08 calc1:fsim:draft:circ7:par:L? calc1:fsim:draft:circ7:par:R 32 calc1:fsim:draft:circ7:par:R? calc1:fsim:draft:circ7:par:C 3.3E-11 calc1:fsim:draft:circ7:par:C? calc1:fsim:draft:circ7:par:G 0.00207 calc1:fsim:draft:circ7:par:G? calc:fsim:draft:circ:next? calc:fsim:draft:circ8:add plpc,2 calc:fsim:draft:circ8:vna:ports 4 CALC:FSIM:DRAFt:CIRCuit8:EMBED:TYPE embed calc1:fsim:draft:circ8:stat on calc1:fsim:draft:circ8:stat? calc1:fsim:draft:circ8:par:L 3.4E-08 calc1:fsim:draft:circ8:par:L? calc1:fsim:draft:circ8:par:R 32 calc1:fsim:draft:circ8:par:R? calc1:fsim:draft:circ8:par:C 3.3E-11 calc1:fsim:draft:circ8:par:C? calc1:fsim:draft:circ8:par:G 0.00207 calc1:fsim:draft:circ8:par:G? CALC:FSIM:DRAFt:SECTion:ZCONversion:ENABle on calc1:fsim:draft:zcon:send:port1:state on calc1:fsim:draft:zcon:send:port1:state? calc1:fsim:draft:zcon:send:port1:complex 10,1 calc1:fsim:draft:zcon:send:port1:complex? calc1:fsim:draft:zcon:send:port2:state on calc1:fsim:draft:zcon:send:port2:state? calc1:fsim:draft:zcon:send:port2:complex 20,2 calc1:fsim:draft:zcon:send:port2:complex? calc1:fsim:draft:zcon:send:port3:state on calc1:fsim:draft:zcon:send:port3:state? calc1:fsim:draft:zcon:send:port3:complex 30,3 calc1:fsim:draft:zcon:send:port3:complex? calc1:fsim:draft:zcon:send:port4:state on calc1:fsim:draft:zcon:send:port4:state? calc1:fsim:draft:zcon:send:port4:complex 40,4 calc1:fsim:draft:zcon:send:port4:complex? CALC:FSIM:DRAFt:SECTion:EXTension:ENABle ON calc:fsim:apply calc1:fsim:stat ON calc1:fsim:stat? calc1:fsim:stat OFF calc1:fsim:stat?  
---  
  
Example program with legacy SCPI commands

*CLS *OPC? SYST:PRES calc1:fsim:send:oord? calc1:fsim:send:oord 1,0,2,3 calc1:fsim:send:oord? sens1:corr:ext ON sens1:corr:ext? sens1:corr:ext:port1:time 5E-11 sens1:corr:ext:port1:time? sens1:corr:ext:port2:time 5E-11 sens1:corr:ext:port2:time? sens1:corr:ext:port3:time 1E-10 sens1:corr:ext:port3:time? sens1:corr:ext:port4:time 1E-10 sens1:corr:ext:port4:time? sens1:corr:ext OFF sens1:corr:ext ON sens1:corr:ext? calc1:fsim:send:deem:stat ON calc1:fsim:send:deem:stat? calc1:fsim:send:deem:port1:type user calc1:fsim:send:deem:port1:type? calc1:fsim:send:deem:port1:user:fil "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_plus_5.00.s2p" calc1:fsim:send:deem:port1:user:fil? calc1:fsim:send:deem:port2:type user calc1:fsim:send:deem:port2:type? calc1:fsim:send:deem:port2:user:fil "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_minus_3.00.s2p" calc1:fsim:send:deem:port2:user:fil? calc1:fsim:send:deem:port3:type user calc1:fsim:send:deem:port3:type? calc1:fsim:send:deem:port3:user:fil "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_plus_4.00.s2p" calc1:fsim:send:deem:port3:user:fil? calc1:fsim:send:deem:port4:type user calc1:fsim:send:deem:port4:type? calc1:fsim:send:deem:port4:user:fil "C:\Keysight\development\bheyburn\scripts\Python_SCPI\s2pFiles\CSET_FIXTURE_minus_2.00.s2p" calc1:fsim:send:deem:port4:user:fil? calc1:fsim:send:zcon:stat on calc1:fsim:send:zcon:stat? calc1:fsim:send:zcon:port1:real 10 calc1:fsim:send:zcon:port1:real? calc1:fsim:send:zcon:port1:imag 1 calc1:fsim:send:zcon:port1:imag? calc1:fsim:send:zcon:port2:real 20 calc1:fsim:send:zcon:port2:real? calc1:fsim:send:zcon:port2:imag 2 calc1:fsim:send:zcon:port2:imag? calc1:fsim:send:zcon:port3:real 30 calc1:fsim:send:zcon:port3:real? calc1:fsim:send:zcon:port3:imag 3 calc1:fsim:send:zcon:port3:imag? calc1:fsim:send:zcon:port4:real 40 calc1:fsim:send:zcon:port4:real? calc1:fsim:send:zcon:port4:imag 4 calc1:fsim:send:zcon:port4:imag? calc1:fsim:send:pmc:stat on calc1:fsim:send:pmc:stat? calc1:fsim:send:pmc:port1:type plpc calc1:fsim:send:pmc:port1:type? calc1:fsim:send:pmc:port1:par:L 2.2E-08 calc1:fsim:send:pmc:port1:par:L? calc1:fsim:send:pmc:port1:par:R 5.2 calc1:fsim:send:pmc:port1:par:R? calc1:fsim:send:pmc:port1:par:C 0 calc1:fsim:send:pmc:port1:par:C? calc1:fsim:send:pmc:port1:par:G 0 calc1:fsim:send:pmc:port1:par:G? calc1:fsim:send:pmc:port2:type plpc calc1:fsim:send:pmc:port2:type? calc1:fsim:send:pmc:port2:par:L 2.2E-08 calc1:fsim:send:pmc:port2:par:L? calc1:fsim:send:pmc:port2:par:R 5.2 calc1:fsim:send:pmc:port2:par:R? calc1:fsim:send:pmc:port2:par:C 0 calc1:fsim:send:pmc:port2:par:C? calc1:fsim:send:pmc:port2:par:G 0 calc1:fsim:send:pmc:port2:par:G? calc1:fsim:send:pmc:port3:type plpc calc1:fsim:send:pmc:port3:type? calc1:fsim:send:pmc:port3:par:L 3.4E-08 calc1:fsim:send:pmc:port3:par:L? calc1:fsim:send:pmc:port3:par:R 32 calc1:fsim:send:pmc:port3:par:R? calc1:fsim:send:pmc:port3:par:C 3.3E-11 calc1:fsim:send:pmc:port3:par:C? calc1:fsim:send:pmc:port3:par:G 0.00207 calc1:fsim:send:pmc:port3:par:G? calc1:fsim:send:pmc:port4:type plpc calc1:fsim:send:pmc:port4:type? calc1:fsim:send:pmc:port4:par:L 3.4E-08 calc1:fsim:send:pmc:port4:par:L? calc1:fsim:send:pmc:port4:par:R 32 calc1:fsim:send:pmc:port4:par:R? calc1:fsim:send:pmc:port4:par:C 3.3E-11 calc1:fsim:send:pmc:port4:par:C? calc1:fsim:send:pmc:port4:par:G 0.00207 calc1:fsim:send:pmc:port4:par:G? calc1:fsim:stat ON calc1:fsim:stat? calc1:fsim:stat OFF calc1:fsim:stat?  
---

